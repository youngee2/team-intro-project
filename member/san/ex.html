<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>강산 소개 페이지</title>

  <!-- Pretendard Font -->
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet" />

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import {
      getFirestore,
      collection,
      addDoc,
      onSnapshot,
      serverTimestamp,
      query,
      orderBy
    } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
    import {
      getDatabase,
      ref,
      runTransaction,
      onValue
    } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBzp7eHyfzy5_ccs1x2Hikm3RoE5BrERak",
      authDomain: "intro-sankang.firebaseapp.com",
      databaseURL: "https://intro-sankang-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "intro-sankang",
      storageBucket: "intro-sankang.appspot.com",
      messagingSenderId: "938592955369",
      appId: "1:938592955369:web:5f4dd18b1c1d67c8c23978",
      measurementId: "G-6VFYZ20J8X"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const rtdb = getDatabase(app);

    document.addEventListener("DOMContentLoaded", () => {
      const visitRef = ref(rtdb, "visitors/count");
      runTransaction(visitRef, (current) => (current || 0) + 1);
      onValue(visitRef, (snapshot) => {
        const count = snapshot.val();
        document.getElementById("visitor-count").innerText = `방문자 수: ${count}`;
      });

      document.getElementById("submitBtn").addEventListener("click", async () => {
        const name = document.getElementById("nameInput").value.trim();
        const msg = document.getElementById("msgInput").value.trim();
        if (name && msg) {
          await addDoc(collection(db, "guestbook"), {
            name,
            message: msg,
            timestamp: serverTimestamp()
          });
          document.getElementById("nameInput").value = "";
          document.getElementById("msgInput").value = "";
        }
      });

      const guestbookRef = collection(db, "guestbook");
      const q = query(guestbookRef, orderBy("timestamp", "desc"));
      onSnapshot(q, (snapshot) => {
        const box = document.getElementById("guestbookBox");
        box.innerHTML = "";
        snapshot.forEach((doc) => {
          const data = doc.data();
          const div = document.createElement("div");
          div.textContent = `📝 ${data.name}: ${data.message}`;
          box.appendChild(div);
        });
      });
    });
  </script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Pretendard', sans-serif;
    }

    body {
      background: repeating-linear-gradient(to right,
          #ffcaed3d,
          #ffcaed3d 180px,
          #ffffff 180px,
          #ffffff 300px);
      background-size: auto;
      background-repeat: repeat;
    }

    .visitor-counter {
      display: inline-block;
      background-color: #f7ecff;
      /* 연보라 배경 */
      color: #9b30ff;
      /* 진한 보라 글씨 */
      font-weight: bold;
      font-size: 18px;
      padding: 10px 20px;
      border-radius: 50px;
      box-shadow: 0 4px 10px rgba(155, 48, 255, 0.15);
      margin-top: 40px;
      transition: all 0.3s ease;
      transform: scale(1.05);
      box-shadow: 0 6px 14px rgba(155, 48, 255, 0.3);
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .member {
      display: flex;
      align-items: center;
      padding: 20px;
      gap: 12px;
    }

    .member h1 {
      margin: 0;
    }

    .back_btn {
      width: 20px;
      margin: 30px auto 30px auto;

    }

    .profile-img {
      width: 160px;
      border-radius: 50%;
      margin-bottom: 20px;
    }

    .highlight {
      color: #B500F7;
    }

    .socials a {
      margin: 0 10px;
      color: #555;
      text-decoration: none;
    }

    .section {
      margin-top: 80px;
    }

    .section h2 {
      font-size: 28px;
      color: #B500F7;
      margin-bottom: 20px;
    }

    .works-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .works-grid img {
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>

<body>
  <!--상단 뒤로가기-->
  <div class="intro_page">
    <div class="member">
      <a href="../../index.html"><img class="back_btn" src="/images/back_btn.png" alt="뒤로가기"></a>
      <h1>Member</h1>
    </div>


    <div class="container">
      <section class="profile">
        <img src="https://avatars.githubusercontent.com/u/139611910?s=400&v=4" class="profile-img" />
        <h1>안녕하세요 저는 16조 <span class="highlight">강 산</span></h1>
        <p>데이터 분야를 공부하다 백엔드에 관심이 생겼어요!</p>
        <div class="socials">
          <a href="https://github.com/ROKSSAN">GitHub</a>
          <a href="https://velog.io/@rokssan">Velog</a>
        </div>
      </section>

      <h2 id="visitor-count" class="section">방문자 수: ...</h2>

      <section class="section">
        <h2>📖 방명록</h2>
        <input type="text" id="nameInput" placeholder="이름 입력" />
        <input type="text" id="msgInput" placeholder="메시지 입력" />
        <button id="submitBtn">등록</button>
        <div id="guestbookBox" style="margin-top: 20px;"></div>
      </section>

      <section class="section">
        <h2>About Me</h2>
        <p>안녕하세요.<br>백엔드 개발과 데이터를 활용한 문제 해결에 관심이 많습니다.</p>
      </section>

      <section class="section">
        <h2>My Works</h2>
        <div class="works-grid">
          <img src="https://via.placeholder.com/200x150?text=Project+1" />
          <img src="https://via.placeholder.com/200x150?text=Project+2" />
          <img src="https://via.placeholder.com/200x150?text=Project+3" />
          <img src="https://via.placeholder.com/200x150?text=Project+4" />
        </div>
      </section>
    </div>
</body>

</html>